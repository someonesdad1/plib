This file is used to test the output of the /plib/pgm/tsub.py script.
.(
    e = sys.stderr
    purl = t("purl")
    print(f"{purl}", file=e, end="")
    print("Messages in this color are sent to stderr and will show what", file=e)
    print("the output text should look like.  Each test passes if the", file=e)
    t.print("colored text and plain text match.", file=e)
    x = 34.3
.)
.
.
.
========== Basic substitution using .def
.# Note the space between '.' and 'def':  shouldn't matter
.     def tsub_h = Hello
Both 'Hello' should have a leading space:
tsub_h
.(
    t.print(f"{purl} Hello", file=e)
.)
.
.
.
========== Basic substitution using ..def
The following should have no leading space
..def tsub_h =Hello
tsub_h
.(
    t.print(f"{purl}Hello", file=e)
.)
.
.
.
========== Substitution of a string containing a space
The text to be substituted is '44 888'.  We'll replace it with 'xx'.
.def 44 888 =xx
44 888
.(
    t.print(f"{purl}xx", file=e)
.)
.
.
.
========== Include a file with .include
.include tsub.test1 once
.(
    s = open("tsub.test1").read().rstrip()
    t.print(f"{purl}{s}", file=e)
.)
Next line should fail when uncommented
.#.include tsub.test1 
.
.
.
========== Include a nonexistent file with .sinclude
.(
    t.print(f"{purl}You should see this message", file=e)
.)
.sinclude tsub.wepoirtj3orn
.
.
.
========== Test .on and .off
.off
Illegal message #1
.(
    m = "Illegal message #1"
    t.print(f"{purl}You shouldn't see {m!r}", file=e)
.)
.on
You should see this #1
.# Now use a conditional
.(
    x = 0
.)
.off
.on x
Illegal message #2
.(
    m = "Illegal message #2"
    t.print(f"{purl}You shouldn't see {m!r}", file=e)
    x = 1
.)
.on x
You should see this #2
.off x
You shouldn't see this #3
Illegal message #3
.(
    m = "Illegal message #3"
    t.print(f"{purl}You shouldn't see {m!r}", file=e)
.)
.on
.
.
.
========== Test block comment
.{
    This is a block
    comment.  You should
    see no output.
.}
.(
    print(f"{purl}You should see no message from this test.", file=e)
.)
.(
    print(f"{purl}End of test", file=e)
.)
